<!DOCTYPE html>
<html lang="en">
    <head>

        <meta name="description" content="Create interactive diagrams in JavaScript easily. JointJS plugins for ERD, Org chart, FSA, UML, PN, DEVS, LDM diagrams are ready to use." />
        <meta name="keywords" content="JointJS, JavaScript, diagrams, diagramming library, UML, charts" />

        <link rel="stylesheet" href="css/tutorial.css" />
        <link rel="stylesheet" href="../node_modules/prism-themes/themes/prism-one-light.css">

        <!-- Dependencies: -->
        <script src="../node_modules/jquery/dist/jquery.js"></script>
        <script src="../node_modules/lodash/lodash.js"></script>
        <script src="../node_modules/backbone/backbone.js"></script>

        <link rel="stylesheet" type="text/css" href="../build/joint.min.css" />
        <script type="text/javascript" src="../build/joint.min.js"></script>

        <title>JointJS - JavaScript diagramming library - Getting started.</title>

    </head>
    <body class="language-javascript tutorial-page">

        <div class="tutorial">

            <h1>Cell Namespace</h1>

            <!-- <ul>
                <li>Explain why type is important, define/class example</li>
                <li>JSON example / error if not set up correctly</li>
                <li>Custom View needs to be set up in the same manner</li>
            </ul> -->

            <p>
                A simple, but important aspect of working with JointJS is to ensure that JointJS knows where to look for built-in and custom shapes.
                In order to achieve this, it's a requirement to tell JointJS where to read cell view definitions. Failure to do so
                will result in an error in our application. Built-in shapes are usually located in the <code>joint.shapes</code> namespace, so this 
                is a common namespace to use. It's possible to add custom shapes to this namespace, or alternatively, you may like to use a different 
                namespace completely. The choice is yours, but you need to state the namespace at the outset when using JointJS.
            </p>

            <p>
                How do we tell JointJS which namespace to use? There are 2 important options to be aware of when creating your diagrams. The
                first is the <code>graph</code> option <code>cellNamespace</code>, and the second is the <code>paper</code> option 
                <code>cellViewNamespace</code>. In the following example, for a cell of type <code>'standard.Rectangle'</code>, the 
                <code>graph</code> looks up the <code>'joint.shapes.standard.Rectangle'</code> path to find the correct constructor. If you don't 
                plan on creating custom shapes, or playing around with namespaces, the following setup should be fine for your application.
            </p>

            <pre><code>const namespace = joint.shapes;
            
const graph = new joint.dia.Graph({}, { cellNamespace: namespace });

const paper = new joint.dia.Paper({
    ...
    cellViewNamespace: namespace
    ...
});

graph.fromJSON({
    cells: [
        { 
            type: 'standard.Rectangle', 
            size: { width: 80, height: 50 },
            position: { x: 10, y: 10 }
        }
    ]
});
</code></pre>

        <p>
            On the other hand, if you are feeling a little adventurous, and would like to create your own custom namespace, the following example 
            should get you started. One crucial difference to take note of is that now our <code>type</code> is <code>'Rectangle'</code>. That's 
            because our custom namespace is just an object which contains our <code>Link</code> and <code>Rectangle</code> constructors.
        </p>

        <pre><code>const { Rectangle, Link } = joint.shapes.standard;
            
const customNamespace = { Rectangle, Link };
            
const graph = new joint.dia.Graph({}, { cellNamespace: customNamespace });

const paper = new joint.dia.Paper({
    ...
    cellViewNamespace: customNamespace
    ...
});

graph.fromJSON({
    cells: [
        { 
            type: 'Rectangle', 
            size: { width: 80, height: 50 },
            position: { x: 10, y: 10 }
        }
    ]
});
</code></pre>

        <p>
            If we were to continue using <code>'standard.Rectangle'</code> as our type in the 2nd example, this would result in a common error 
            in JointJS. If you see the dreaded error <code>Uncaught Error: dia.ElementView: markup required</code> appearing in your console,
            it's likely your namespace is not set up correctly, and JointJS cannot find the correct shape.
        </p>

        <div class="paper" id="paper-cell-namespace"></div>
        <p>JointJS source code: <a href="js/cell-namespace.js" target="_blank">cell-namespace.js</a></p>

        </div><!--end tutorial-->

        <script src="../node_modules/prismjs/prism.js"></script>

        <script src="js/cell-namespace.js"></script>
    </body>
</html>
