<!DOCTYPE html>
<html>
    <head>

        <link rel="canonical" href="http://www.jointjs.com/" />
        <meta name="description" content="Create interactive diagrams in JavaScript easily. JointJS plugins for ERD, Org chart, FSA, UML, PN, DEVS, LDM diagrams are ready to use." />
        <meta name="keywords" content="JointJS, JavaScript, diagrams, diagramming library, UML, charts" />

        <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

        <link rel="stylesheet" href="css/tutorial.css" />
        <link rel="stylesheet" href="../node_modules/prismjs/themes/prism.css">
        <link rel="stylesheet" href="../node_modules/prismjs/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="../node_modules/prismjs/plugins/line-highlight/prism-line-highlight.css">

        <!-- Dependencies: -->
        <script src="../node_modules/jquery/dist/jquery.js"></script>
        <script src="../node_modules/lodash/index.js"></script>
        <script src="../node_modules/backbone/backbone.js"></script>

        <link rel="stylesheet" type="text/css" href="../build/joint.min.css" />
        <script type="text/javascript" src="../build/joint.min.js"></script>

        <title>JointJS - JavaScript diagramming library - Getting started.</title>

    </head>
    <body class="language-javascript tutorial-page">

        <script>
            SVGElement.prototype.getTransformToElement = SVGElement.prototype.getTransformToElement || function (toElement) {
                return toElement.getScreenCTM().inverse().multiply(this.getScreenCTM());
            };
        </script>

        <div class="tutorial">

            <h2>Links</h2>

            <p><a href="hello-world.html">In the first part of the tutorial, we saw a working example of a
                simple JointJS application:</a></p>

            <div class="paper" id="paper-hello-world"></div>

            <p><a href="graph-and-paper.html">In the previous section, we focused on making the elements look much more
                interesting:</a></p>

            <div class="paper" id="paper-elements"></div>

            <p>In this section, we are going to understand the other crucial building block of JointJS diagrams - links.
                This is an introduction to links as they appear in the Hello, World! application; more advanced topics
                are covered later in the tutorial series.
                We will continue with the code we modified in the previous section:</p>

            <pre class="line-numbers" data-line="69-71,110-112,153-155" style="padding-left:3.5em"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;link rel="stylesheet" type="text/css" href="node_modules/jointjs/dist/joint.css" /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- content --&gt;
    &lt;div id="myholder"&gt;&lt;/div&gt;

    &lt;!-- dependencies --&gt;
    &lt;script src="node_modules/jquery/dist/jquery.js"&gt;&lt;/script&gt;
    &lt;script src="node_modules/lodash/index.js"&gt;&lt;/script&gt;
    &lt;script src="node_modules/backbone/backbone.js"&gt;&lt;/script&gt;
    &lt;script src="node_modules/jointjs/dist/joint.js"&gt;&lt;/script&gt;

    &lt;!-- code --&gt;
    &lt;script type="text/javascript"&gt;

        var graph = new joint.dia.Graph;

        var paper = new joint.dia.Paper({
            el: document.getElementById('myholder'),
            model: graph,
            width: 600,
            height: 300, // height had to be increased
            gridSize: 10,
            drawGrid: true,
            background: {
                color: 'rgba(0, 255, 0, 0.3)'
            }
        });

        var rect = new joint.shapes.standard.Rectangle();
        rect.position(100, 30);
        rect.resize(100, 30);
        rect.attr({
            body: {
                fill: 'blue'
            },
            label: {
                text: 'Hello',
                style: {
                    fill: 'white'
                }
            }
        });

        var rect2 = new joint.shapes.standard.Rectangle();
        rect2.position(400, 30);
        rect2.resize(100, 30);
        rect2.attr({
            body: {
                fill: '#2C3E50',
                rx: 5,
                ry: 5,
                strokeWidth: 2
            },
            label: {
                text: 'World!',
                style: {
                    fill: '#3498DB',
                    fontSize: 18,
                    fontWeight: 'bold',
                    fontVariant: 'small-caps'
                }
            }
        });

        var link = new joint.shapes.standard.Link();
        link.source({ id: rect.id });
        link.target({ id: rect2.id });

        var rect3 = new joint.shapes.standard.Rectangle();
        rect3.position(100, 130);
        rect3.resize(100, 30);
        rect3.attr({
            body: {
                fill: '#E74C3C',
                rx: 20,
                ry: 20,
                strokeWidth: 0
            },
            label: {
                text: 'Hello',
                style: {
                    fill: '#ECF0F1',
                    fontSize: 11,
                    fontVariant: 'small-caps'
                }
            }
        });

        var rect4 = new joint.shapes.standard.Rectangle();
        rect4.position(400, 130);
        rect4.resize(100, 30);
        rect4.attr({
            body: {
                fill: '#8E44AD',
                strokeWidth: 0
            },
            label: {
                text: 'World!',
                style: {
                    fill: 'white',
                    fontSize: 13
                }
            }
        });

        var link2 = new joint.shapes.standard.Link();
        link2.source({ id: rect3.id });
        link2.target({ id: rect4.id });

        var rect5 = new joint.shapes.standard.Rectangle();
        rect5.position(100, 230);
        rect5.resize(100, 30);
        rect5.attr({
            body: {
                fill: '#2ECC71',
                strokeDasharray: '10,2'
            },
            label: {
                text: 'Hello',
                style: {
                    fill: 'black',
                    fontSize: 13
                }
            }
        });

        var rect6 = new joint.shapes.standard.Rectangle();
        rect6.position(400, 230);
        rect6.resize(100, 30);
        rect6.attr({
            body: {
                fill: '#F39C12',
                rx: 20,
                ry: 20,
                strokeDasharray: '1,1'
            },
            label: {
                text: 'World!',
                style: {
                    fill: 'gray',
                    fontSize: 18,
                    fontWeight: 'bold',
                    fontVariant: 'small-caps',
                    textShadow: '1px 1px 1px black'
                }
            }
        });

        var link3 = new joint.shapes.standard.Link();
        link3.source({ id: rect5.id });
        link3.target({ id: rect6.id });

        graph2.addCells([rect, rect2, link, rect3, rect4, link2, rect5, rect6, link3]);

    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

            <p>Working with links is similar to working with elements:</p>

            <ul>
                <li>First, a link is created by calling its constructor.</li>
                <li>Then, different methods are called on the link to set its properties (source &amp; target, vertices,
                    router &amp; connector, attributes, labels...).</li>
            </ul>

            <p>In our case, the three links are instances of
                <a href="/docs/jointjs#shapes.standard.Link" target="_blank"><code>joint.shapes.standard.Link</code></a>.
                The <a href="/docs/jointjs#shapes.standard.intro" target="_blank">standard shape library</a>
                contains several other ready-made link definitions (e.g. DoubleLink and ShadowLink) that can
                be used in your document.
                Moreover, <a href="custom-links">advanced users may create their own link definitions instead</a>, by
                extending the basic
                <a href="/docs/jointjs#dia.Link" target="_blank"><code>joint.dia.Link</code></a> class.</p>

            <p>Our demo showcases the two required <a href="/docs/jointjs#dia.Link" target="_blank">Link
                methods</a>:</p>

            <ul>
                <li><a href="/docs/jointjs#dia.Link.prototype.source" target="_blank"><code>link.source()</code></a> and
                    <a href="/docs/jointjs#dia.Link.prototype.target" target="_blank"><code>link.target()</code></a>
                    - sets the source/target of the link.
                    To identify an element in the graph, pass an object in the form <code>{ id: elementId }</code> (as
                    in our examples).
                    To identify a fixed point on the paper, pass an object in the form <code>{ x: xCoordinate,
                    y: yCoordinate }</code> (or a <code>g.Point</code>).</li>
            </ul>

            <p>Important optional methods include:</p>

            <ul>
                <li><a href="/docs/jointjs#dia.Link.prototype.vertices" target="_blank"><code>link.vertices()</code></a>
                    - sets the <code>vertices</code> array of the link.
                    Vertices are user-defined points on the paper that the link should pass trough on its way from
                    <code>source</code> to <code>target</code>.
                    The default is an empty array.</li>
                <li><a href="/docs/jointjs#dia.Link.prototype.router" target="_blank"><code>link.router()</code></a>
                    - sets the <code>router</code> of the link.
                    The router is a function that takes the array of link vertices and adds additional points to it as
                    necessary to create a route with desired characteristics; for example, the <code>orthogonal</code>
                    router creates a route consisting of vertical and horizontal lines attached at right angles.
                    JointJS comes witha collection of pre-defined routers in the
                    <a href="/docs/jointjs#routers" target="_blank"><code>joint.routers</code></a> namespace.
                    Two of the provided routers are <q>smart routers</q> that are able to navigate around obstacles in
                    their path.
                    The default is the <a href="/docs/jointjs#routers.normal" target="_blank"><code>normal</code></a>
                    router, which returns the array of vertices as route points.
                    <a href="/docs/jointjs#routers.custom" target="_blank">Advanced users may provide their own
                    routers to support custom routing strategies.</a></li>
                <li><a href="/docs/jointjs#dia.Link.prototype.connector" target="_blank"><code>link.connector()</code></a>
                    - sets the <code>connector</code> of the link.
                    The connector is a function in charge of rendering the link's path on the paper.
                    It takes the array of route points and constructs a series of SVG Path element commands to create a
                    path with desired characteristics; for example, the <code>rounded</code> connector creates straight
                    line segments with rounded corners around route points.
                    JointJS comes with a collection of pre-defined connectors in the
                    <a href="/docs/jointjs#connectors" target="_blank"><code>joint.connectors</code></a> namespace.
                    The default is the <a href="/docs/jointjs#connectors.normal" target="_blank"><code>normal</code></a>
                    connector, which connects route points with simple straight lines.
                    <a href="/docs/jointjs#connectors.custom" target="_blank">Advanced users may provide their own
                    connectors to support custom connecting strategies.</a></li>
                <li><a href="/docs/jointjs#dia.Link.prototype.clone" target="_blank"><code>link.clone()</code></a>
                    - clones an existing link, including its source, target, vertices, router, connector, attributes,
                    and labels (attributes and labels are explained in more detail below).</li>
            </ul>

            <p>Link styling can be changed analogously to <a href="elements.html#attr">element styling</a>:</p>

            <ul>
                <li><a href="/docs/jointjs#dia.Link.prototype.attr" target="_blank"><code>link.attr()</code></a>
                    - programmatically assigns SVG attributes directly to the SVGElements of the link's markup.
                    (CSS styles may still be used on top of the styling defined here, and they will have precedence over
                    these attributes.)</li>
            </ul>

            <p>The
                <a href="/docs/jointjs#shapes.standard.Link" target="_blank"><code>joint.shapes.standard.Link</code></a>
                shape used in our example has two selectors defined:
                <code>line</code> (the visible <code>&lt;path&gt;</code> SVGElement of the link), and
                <code>wrapper</code> (a wider, transparent <code>&lt;path&gt;</code> SVGElement under the
                <code>line</code> that makes it easier to interact with the link).
                Other link shapes have their own selector names (although consistency was preserved where applicable,
                e.g. with <code>line</code>); please refer to the <code>joint.shapes.standard</code>
                <a href="/docs/jointjs#shapes.standard" target="_blank">documentation</a> for detailed information.</p>

            <p>For example, we can change the color of a link by changing the <code>stroke</code> color attribute on the
                <code>line</code> selector:</p>

            <pre><code>link.attr('line/stroke', 'orange');</code></pre>

            <p>The same effect can be achieved by passing a single object argument to <code>link.attr</code>:</p>

            <pre><code>link.attr({
    line: { // selector for the visible &lt;path&gt; SVGElement
        stroke: 'orange' // SVG attribute and value
    }
});</code></pre>

            <p>Finally, to change another aspect of the link presentation:</p>

            <ul>
                <li><a href="/docs/jointjs#dia.Link.prototype.labels" target="_blank"><code>link.labels()</code></a>
                    - sets the <code>labels</code> array of the link.
                    Labels have <code>position</code>, <code>markup</code> and <code>attrs</code>.</li>
            </ul>

            <p>Now, let's have some fun with our links:</p>

            <div class="paper" id="paper-links"></div>

            <p>The full code to produce these shapes looks like this:</p>

            <p>This concludes the introductory section of the JointJS tutorial!
                Congratulations!
                As you can see, we came a long way from the initial Hello, World! application.
                Now that you have seen the basics, you should be confident working with the most important building blocks of
                JointJS - Graphs, Papers, Elements, and Links.
                The next step is to head over to the intermediate section of the tutorial, which explains some handy
                but more involved concepts, including interaction, persistence, and extending JointJS according to the
                needs of your application.</p>

            <p><a href="links.html">The next step is to learn how to work with links.</a></p>





            <h2>Link styling</h2>

            <p>Now when we know how to style elements, let's have a look on how to style links. You might be surprised but
                the way links are styled is exactly the same as with styling elements. Again, we need to know the SVG
                structure of links and then use either external CSS or
                the <a href="/docs/jointjs/v1.0/joint.html#dia.Link.prototype.attr" target="_blank">attr</a> method of <code>joint.dia.Link</code> (which is actually the
                same as of <code>joint.dia.Element</code>).
                The SVG structure of links is the following:
            <pre><code>&lt;path class="connection"/&gt;
&lt;path class="marker-source"/&gt;
&lt;path class="marker-target"/&gt;
&lt;path class="connection-wrap"/&gt;
&lt;g class="labels" /&gt;
&lt;g class="marker-vertices"/&gt;
&lt;g class="marker-arrowheads"/&gt;
&lt;g class="link-tools" /&gt;</code></pre>
            Let's see an example:
            <pre><code>link.attr({
    '.connection': { stroke: 'blue' },
    '.marker-source': { fill: 'red', d: 'M 10 0 L 0 5 L 10 10 z' },
    '.marker-target': { fill: 'yellow', d: 'M 10 0 L 0 5 L 10 10 z' }
});</code></pre>

            <div class="paper" id="paper-link-styling"></div>
            <p class="note">
                I left the styling of the other links in this example out of this text. If you want to look at it anyway,
                inspect this page, find the tutorial.js script and search the function linkStyling().
            </p>
            <p>
                Setting vertices on a link is as simple as:
            </p>
            <pre><code>link.set('vertices', [{ x: 300, y: 60 }, { x: 400, y: 60 }, { x: 400, y: 20 }])</code></pre>
            <p>
                If you prefer the link to not be sharply broken at the vertices but instead interpolated by a curve,
                set the <code>smooth</code> attribute:
            </p>
            <pre><code>link.set('smooth', true)</code></pre>

        </div><!--end tutorial-->

        <script src="../node_modules/prismjs/prism.js"></script>
        <script src="../node_modules/prismjs/plugins/line-numbers/prism-line-numbers.js"></script>
        <script src="../node_modules/prismjs/plugins/line-highlight/prism-line-highlight.js"></script>

        <script src="js/hello-world.js"></script>
        <script src="js/elements.js"></script>
        <script src="js/links.js"></script>
    </body>
</html>
