<!DOCTYPE html>
<html lang="en">
<head>

    <link rel="canonical" href="http://www.jointjs.com/"/>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
          content="Create interactive diagrams in JavaScript easily. JointJS plugins for ERD, Org chart, FSA, UML, PN, DEVS, LDM diagrams are ready to use."/>
    <meta name="keywords" content="JointJS, JavaScript, diagrams, diagramming library, UML, charts"/>

    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    <link rel="stylesheet" href="css/tutorial.css"/>
    <link rel="stylesheet" href="../node_modules/prismjs/themes/prism.css">

    <!-- Dependencies: -->
    <link rel="stylesheet" type="text/css" href="../build/joint.min.css" />

    <title>JointJS - Create custom attributes with prop() and set()</title>

</head>
<body class="language-javascript tutorial-page">
    <div class="tutorial">

    <h2>Custom Attributes</h2>

    <p>
        If you have been working with JointJS for any amount of time, you are probably familiar with presentation attributes.
        These are the attributes which contribute to the visual aspect of our shape, and are mostly defined through
        <code>attrs</code> objects. While presentation attributes provide us with great functionality, occasionally we might want 
        to create our own attributes to help us work with our shape. This is where custom attributes come in useful. Maybe we 
        want a boolean to represent a state, a number for our threshold value, or just provide some attributes which represent our 
        specific problem, all of these could be possible use cases for a custom attribute.
    </p>

    <p>
        To work with presentation attributes, we usually use the <code>attr()</code> method. However, when working with custom
        attributes, we suggest working with <code>prop()</code> and <code>set()</code> instead. These methods will help you store
        custom data on our model, while also providing a nice separation between custom and presentation attributes if needed.
    </p>

    <h3>prop()</h3>

    <p>
        Prop is used to set attributes on the element model. It can be used to set both custom and presentation attributes, and
        it also provides support for nesting making it very flexible. When setting an attribute, the first parameter is an object or 
        string representation of your path, and the second parameter will be the value you wish to set. Prop will merge the properties
        you want to set with existing ones already present in the Cell.
    </p>

    <pre><code>
        element.prop('attrs/body/stroke': '#FFF'); // Set a presentation attribute

        element.prop('data', 10); // Set a custom property
        element.prop({data: 10}); // Set a custom property using an object

        // The following output will be the result
        data: 10 

        element.prop('data/count', 10); // Set a nested custom property

        // Custom attribute will have the following structure
        data: {
            count: 10
        }
    </code></pre>

    <p>
        <code>prop()</code> not only provides support for nested objects, but for nested arrays too.
    </p>

    <code>
        element.prop('mylist/0/data/0/value', 50);

        // This will produce the following custom attribute
        mylist: [{
            data: [{
                value: 50
            }]
        }]
    </code>

    <h3>set()</h3>
    <!-- set overrides everything so it doesn't merge -->
    <p>
        Set is provided by <i>backbone.js</i>, and similarly to <code>prop()</code>, it can be used to set custom data attributes 
        on the element model. However, <code>set()</code> doesn't provide you with that nice nesting functionality that we get
        with <code>prop()</code>.
    </p>

    <pre><code>
        element.set('data', 10); // Set a custom property

        // The following output will be the result
        data: 10 

        element.prop('data/count', 10); // Try to set a nested custom property

        // The output produced will not be nested like when using prop()
        data/count: 10
    </code></pre>

    <h3>Differences between set() and prop()</h3>

    <h3>Why don't we just use attr()?</h3>

    <p>
        As mentioned before, the <code>attr()</code> method is primarily used for presentation attributes. These are attributes
        which appear in an attrs object. Custom attributes will appear as a sibling to the <code>attrs</code> object. This provides 
        a nice separation between visual attributes and our custom attributes. 
    </p>

    <p>
        <!-- Briefly explain attrs object -->
        <code>attr()</code> assigns SVG attributes directly to markup of SVGElements.
    </p>

    <p>
        If you would like to explore any of the features mentioned here in more detail, you can find extra information in our 
        <a href="https://resources.jointjs.com/docs/jointjs/v3.3/joint.html" target="_blank">JointJS documentation</a>.
    </p>

    </div><!--end tutorial-->
    <script src="../node_modules/prismjs/prism.js"></script>
</body>
</html>
